<html><head><title>orientacionkalman</title>
<!-- Help file for orientacionkalman.m generated by makehtmldoc 1.22, 10-Jul-2019 12:24:28 -->
<!-- makehtmldoc (F. Moisy, 2005-2006), see http://www.fast.u-psud.fr/~moisy/ml/ -->
 
<link rel=stylesheet href="docstyle1.css" type="text/css">
</head>
<body bgcolor=#ffffff>
<table width="100%" border=0 cellpadding=0 cellspacing=0><tr><td valign=baseline bgcolor="#e7ebf7"><b><a href="Contents.html">Contents</a></b></td><td valign=baseline bgcolor="#e7ebf7" align=right><a href="orientaciongiroscopo.html"><b>&lt;&lt; Prev</b></a>&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr></table>
<font size=+3 color="#990000">orientacionkalman</font><br>
Calcula la orientación en base a los datos de un giróscopo y un compás situados en el COG<br>
<br>
 
<font size=+1 color="#990000"><b>Description</b></font>
<code><pre>
 
<b>orientacionkalman</b> Realiza la integración de los datos provenientes de un compás y de un giróscopo mediante un filtro de Kalman 
Los datos del giróscopo se analizan para determinar su fiabilidad, y se asigna una fiabilidad a los mismos en base a: 
la desviación vertical del campo magnético y la diferencia con los datos proporcionados por el giróscopo. 
Si se emplea esta función <a href="orientacioncompas.html">orientacioncompas</a> NO debe ser llamada de forma 
directa por el programador, o al menos no se le debe proporcionar un ángulo de referencia. 
 
Syntax: 
  function angulo=<b>orientacionkalman</b>(velgiro, campox,campoy,campoz, angulo0,freq) 
 
  Parámetros de entrada: 
                velgiro    - vector con la velocidad de giro respecto al eje vertical en cada periodo 
                             de muestreo. Puede contener cualquier número 
                             de muestras 
                campox     - 
                campoy     - 
                campoz     - 
                angulo0    - valor del ángulo inicial. Si no se proporciona la función lo inicializa a cero 
                             El angulo se conserva final se conserva para 
                             la siguiente llamada 
                freq       - frecuencia de muestreo. Si no se proporciona, en la primera llamada se inicializa a 100Hz 
                             Se conserva entre llamadas. 
                reset      - si vale 1 reinicia el filtro de Kalman 
  Parámetros de salida: 
                angulo     - vector con el angulo correspondiente a cada 
                             instante 
 
Modelo de Kalman:   (angulo  ) (1 T 0) (angulo ) (ruido_angulo) 
                    (velgiro )=(0 1 0)*(velgiro)+(ruido_veloc ) 
                    (bias    ) (0 0 1) (bias   ) (ruido_bias  ) 
 
                    (angulocompas) (1 0 0 ) (angulo ) (ruido_compas) 
                    (velgiroscopo)=(0 1 1 )*(velgiro)+(ruido_giroscopo) 
                                            (bias   ) 
 
 El ruido de compas varia entre 10º en condiciones normales y 1e10 cuando el compas no es fiable 
 Se considera no fiable en dos circunstancias: Cuando <a href="orientacioncompas.html">orientacioncompas</a> así lo dice, o cuando 
 la diferencia entre el angulo teorico según kalman y segun el compas excede los 5º. 
 Se vuelve a considerar válido cuando esa diferencia baja de los 2º, en cuyo caso se reinicia el proceso 
 de filtrado. 
 Cuando el compas no es válido, el resultado se corresponde aprox con la integración de la señal del giroscopo. 
 
 Examples: 
 
 
</pre>
<font size=+1 color="#990000"><b>See Also</b></font>
<pre>
orientacionbrujula, <a href="orientacioncompas.html">orientacioncompas</a> 
</pre></code>
 
<br>
<table width="100%" border=0 cellspacing=0 bgcolor="#e7ebf7"><tr><td>&nbsp;<a href="orientaciongiroscopo.html"><b>Previous: orientaciongiroscopo</b></a></td><td align=right>&nbsp;</td></tr></table><br>
<br>
<font size=-1>Help file generated by <a href="http://www.fast.u-psud.fr/~moisy/ml" target="_blank">makehtmldoc 1.22</a></font><br>
</body></html>
